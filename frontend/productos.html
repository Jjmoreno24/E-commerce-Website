<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos IEMTEC Pma</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,700;1,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https:stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <a href="index.html"><img src="Pictures/logo.png" width="325px"></a>
                </div>
                <nav>
                    <ul id="MenuItems">
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="productos.html">Productos</a></li>
                        <li><a href="conocenos.html">Conocenos</a></li>
                        <li><a href="login.html">Registrate</a></li>
                    </ul>
                </nav>
                <a href="carrito.html"><img src="Pictures/cart.png" width="40px" height="40px"></a>
                <img src="Pictures/menu.png" class="menu-icon" onclick="menutoggle()">
            </div>
        </div>

    <div class="small-container">
        <div class="row row-2">
            <h2>Todos los Productos</h2>
            <select>
                <option>Menor precio</option>
                <option>Mayor precio</option>
                <option>Mas popular</option>
                <option>Mas comprado</option>
            </select>
        </div>
        <div class="row" id="product-list">
            <!-- Products will be inserted here dynamically -->
        </div>
        <div class="page-boton">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span>&#8594;</span>
        </div>
    </div>
  <!----------------------- Pie de pagina ------------------------>
  <div class="pie">
    <div class="container">
        <div class="row">
            <div class="pie-col-1">
                <h3>Descarga Nuestra App</h3>
                <p>App disponible para telefono Android y iOS </p>
                <div class="app-logo">
                    <img src="Pictures/play-store.png">
                    <img src="Pictures/app-store.png">
                </div>
            </div>
            <div class="pie-col-2">
                <img src="Pictures/logo-black.png">
                <p>Nuestro propósito es hacer que el placer y los beneficios del deporte sean accesibles de forma sostenible para la mayorías</p>
            </div>
            <div class="pie-col-3">
                <h3>Enlaces</h3>
                <ul>
                    <li>Cupones</li>
                    <li>Blogs</li>
                    <li>Política de Devoluciones</li>
                    <li>Afiliarse</li>
                </ul>
            </div>
            <div class="pie-col-4">
                <h3>Siguenos</h3>
                <ul>
                    <li>Facebook</li>
                    <li>Twitter</li>
                    <li>Instsgram</li>
                    <li>YouTube</li>
                </ul>
            </div>
        </div>
        <hr>
        <p class="Copyright">Copyright 2023 - First Ecommerce website</p>
    </div>
  </div>
    <!------------------------ Js para menu ------------------------>
    <script>
        var MenuItems = document.getElementById("MenuItems");

        MenuItems.style.maxHeight = "0px";
       
        function menutoggle(){
            if(MenuItems.style.maxHeight == "0px")
            {
                MenuItems.style.maxHeight = "200px";
            }
            else{
                MenuItems.style.maxHeight = "0px";
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const productList = document.getElementById('product-list');

            fetch('/api/products')
                .then(response => response.json())
                .then(products => {
                    let productRow = document.createElement('div');
                    productRow.className = 'row';

                    products.forEach((product, index) => {
                        const productCard = `
                            <div class="col-4">
                                <a href="detalle_producto.html?id=${product._id}"><img src="${product.images[0]}" alt="${product.name}"></a>
                                <h4>${product.name}</h4>
                                <div class="rating">
                                    ${'<i class="fa fa-star"></i>'.repeat(Math.floor(product.rating))}
                                    ${product.rating % 1 !== 0 ? '<i class="fa fa-star-half-o"></i>' : ''}
                                    ${'<i class="fa fa-star-o"></i>'.repeat(5 - Math.ceil(product.rating))}
                                </div>
                                <p>$${product.price.toFixed(2)}</p>
                            </div>
                        `;
                        productRow.innerHTML += productCard;

                        if ((index + 1) % 4 === 0 || (index + 1) === products.length) {
                            productList.appendChild(productRow);
                            if ((index + 1) < products.length) {
                                productRow = document.createElement('div');
                                productRow.className = 'row';
                            }
                        }
                    });
                })
                .catch(error => {
                    console.error('Error fetching products:', error);
                    productList.innerHTML = '<p>Error al cargar los productos. Por favor, intente de nuevo más tarde.</p>';
                });
        });
    </script>
</body>
</html>
